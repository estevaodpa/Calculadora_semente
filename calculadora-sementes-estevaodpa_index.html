<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calculadora de Sementes Corrigida</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f6f6f6;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    max-width: 450px;
    width: 100%;
    background: white;
    padding: 20px 30px;
    border-radius: 10px;
    box-shadow: 0 3px 15px rgba(0,0,0,0.1);
  }
  h1 {
    margin-bottom: 20px;
    text-align: center;
  }
  label {
    margin-top: 15px;
    font-weight: bold;
    display: block;
  }
  input[type=text] {
    width: 100%;
    padding: 10px;
    font-size: 1em;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }
  .info {
    font-size: 0.85em;
    font-style: italic;
    color: #555;
    margin-top: 8px;
    margin-bottom: 20px;
  }
  #result {
    margin-top: 20px;
    font-weight: bold;
    background: #eee;
    padding: 15px;
    border-radius: 6px;
    font-size: 1.1em;
    line-height: 1.5;
  }
  .footer {
    text-align: center;
    margin-top: 20px;
    font-size: 0.9em;
    color: #333;
  }
</style>
</head>
<body>
  <div class="container" role="main">
    <h1>Calculadora de Sementes</h1>

    <label for="pop">População de plantas desejada (milhares plantas/ha):</label>
    <input type="text" id="pop" placeholder="Ex: 10,5" inputmode="decimal" autocomplete="off" />

    <label for="esp">Espaçamento (metros):</label>
    <input type="text" id="esp" placeholder="Ex: 0,45" inputmode="decimal" autocomplete="off" />

    <label for="germ">Poder germinativo (%):</label>
    <input type="text" id="germ" placeholder="Ex: 85,5" inputmode="decimal" autocomplete="off" />
    
    <div class="info">
      O fator <strong>1,10</strong> já está adicionado para compensar perdas causadas por práticas, doenças, falhas no planejamento e problemas como excesso de palha ou solo úmido, que podem diminuir o estande final desejado.
    </div>
    
    <div id="result">
      <p>Sementes por hectare: -</p>
      <p>Sementes por metro: -</p>
      <p>Plantas por metro: -</p>
    </div>
  </div>

  <div class="footer">Desenvolvida por @estevaodpa</div>

  <script>
    function parseNumber(str) {
      if (!str) return 0;
      str = str.replace(/\./g, '').replace(',', '.');
      const parts = str.split('.');
      if (parts.length > 2) {
        str = parts.shift() + '.' + parts.join('');
      }
      const val = parseFloat(str);
      return isNaN(val) ? 0 : val;
    }

    function formatNumber(num, decimals = 2) {
      return num.toLocaleString('pt-BR', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
    }

    function calculate() {
      const pop = parseNumber(document.getElementById('pop').value);
      const esp = parseNumber(document.getElementById('esp').value);
      const germPercent = parseNumber(document.getElementById('germ').value);

      if (pop > 0 && esp > 0 && germPercent > 0) {
        const sementesPorHectare = ((pop * 100) / germPercent) * 1.10;
        const sementesPorMetro = (sementesPorHectare * esp) / 10000;
        const germDecimal = germPercent / 100;
        const plantasPorMetro = (pop * esp) / (10000 * germDecimal);

        document.getElementById('result').innerHTML = `
          <p>Sementes por hectare: ${formatNumber(sementesPorHectare, 0)}</p>
          <p>Sementes por metro: ${formatNumber(sementesPorMetro)}</p>
          <p>Plantas por metro: ${formatNumber(plantasPorMetro)}</p>
        `;
      } else {
        document.getElementById('result').innerHTML = `
          <p>Sementes por hectare: -</p>
          <p>Sementes por metro: -</p>
          <p>Plantas por metro: -</p>
        `;
      }
    }

    function maskDecimal(input) {
      input.value = input.value.replace(/[^0-9,]/g, '');
    }

    ['input', 'change', 'paste', 'keyup'].forEach(event => {
      ['pop', 'esp', 'germ'].forEach(id => {
        const element = document.getElementById(id);
        element.addEventListener(event, e => {
          maskDecimal(e.target);
          calculate();
        });
      });
    });

    window.onload = calculate;
  </script>
</body>
</html>
